import{S as x,i as W,s as V,l as w,a as M,m as _,n as k,h as T,c as E,p,b as A,H as m,E as I,o as B,D as K}from"./index-94d693ab.js";import{g as S}from"./navigation-88dbfef8.js";import{b as q,c as D,d as U,e as j}from"./store-87ee3f59.js";const N=c=>{if(!c)return;const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e="NOPQRSTUVWXYZABCDEFGHIJKLMnopqrstuvwxyzabcdefghijklm";let r="";for(let i=0;i<c.length;i++){const o=n.indexOf(c[i]);r+=e[o]}return r==="undefined"?c:r};function O(c){let n,e,r,i,o,y,d;return{c(){n=w("div"),e=w("div"),r=w("div"),i=M(),o=w("label"),y=M(),d=w("input"),this.h()},l(l){n=_(l,"DIV",{class:!0});var a=k(n);e=_(a,"DIV",{class:!0});var s=k(e);r=_(s,"DIV",{class:!0});var v=k(r);v.forEach(T),i=E(s),o=_(s,"LABEL",{for:!0,class:!0});var L=k(o);L.forEach(T),y=E(s),d=_(s,"INPUT",{type:!0,id:!0,class:!0}),s.forEach(T),a.forEach(T),this.h()},h(){p(r,"class","content svelte-sq2wwh"),p(o,"for","typer"),p(o,"class","svelte-sq2wwh"),p(d,"type","text"),p(d,"id","typer"),p(d,"class","svelte-sq2wwh"),p(e,"class","form svelte-sq2wwh"),p(n,"class","container svelte-sq2wwh")},m(l,a){A(l,n,a),m(n,e),m(e,r),r.innerHTML=c[0],m(e,i),m(e,o),o.innerHTML=c[1],m(e,y),m(e,d)},p(l,[a]){a&1&&(r.innerHTML=l[0]),a&2&&(o.innerHTML=l[1])},i:I,o:I,d(l){l&&T(n)}}}function P(c,n,e){let{sample:r=""}=n,{isChallenge:i=!1}=n,{title:o=""}=n,y="",d="",l=0,a,s=[],v,L;B(async()=>{const t=[];r.split(" ").forEach((u,f)=>{t.push(`<span class='word word-${f}'>${u}</span>`)}),e(0,y=t.join(" ")),e(1,d=t[0]),a=document.querySelector("#typer"),a.focus(),a.addEventListener("keyup",u=>C(u)),a.addEventListener("keydown",u=>b(u)),await K(),s=document.querySelectorAll(".word"),s[0].style.color="var(--link)",localStorage.setItem("_l","")});const b=t=>{let u=localStorage.getItem("_l");localStorage.setItem("_l",`${u}${N(t.key)}`)},C=t=>{if(t.key!=="Tab"&&v===void 0&&(v=new Date),t.key==="Alt"||t.key==="Control")return;let u=a.value.trim(),f=s[l],g=s[l-1];t.key===" "?(l++,l===s.length-1&&H(),g=f,f=s[l],u===g.innerHTML?(g.style.color="var(--surface)",q.update(h=>h+=g.innerHTML.split("").length/5),D.update(h=>++h)):(g.style.color="var(--red)",U.update(h=>++h)),f.style.color="var(--link)",f.scrollIntoView({behaviour:"smooth"}),a.value="",e(1,d=f.innerHTML)):u===s[l].innerHTML?(l===s.length-2&&(q.update(h=>h+=s[l].innerHTML.split("").length/5),D.update(h=>++h),H()),f.style.color="var(--green)"):f.style.color="var(--red)"},H=()=>{console.log(i),L=new Date;let t=L-v;j.set(t/1e3),console.log(i),i?S(`/typ3r/challenge/score?title=${o}`,!0):S("/typ3r/score",!0)};return c.$$set=t=>{"sample"in t&&e(2,r=t.sample),"isChallenge"in t&&e(3,i=t.isChallenge),"title"in t&&e(4,o=t.title)},[y,d,r,i,o]}class G extends x{constructor(n){super(),W(this,n,P,O,V,{sample:2,isChallenge:3,title:4})}}export{G as T};
